# 1、如何保证缓存与数据库的双写一致性？

不可能做到完全的一致性，尽可能地减少不一致出现的概率

- 采用双删除策略： 写请求先删除缓存, 更新数据库，然后异步删除缓存 （防止删除缓存后，更新数据库前，有读线程读取了旧数据更新到缓存中）
- 写请求先设置缓存为指定值，然后更新数据库，更新缓存；读请求读到指定值时，非超时条件下循环获取，等到写请求更新缓存；如果循环超时了则读取数据库，更新缓存